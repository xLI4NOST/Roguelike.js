<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,700&amp;subset=cyrillic" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700&amp;subset=cyrillic" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,700&amp;subset=cyrillic" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i|Tinos:400,400i&amp;subset=cyrillic"
          rel="stylesheet">
    <script type="text/javascript" src="/shared/3rdparty/jquery/jquery.js" language="javascript1.1"></script>
    <script src="index.js"></script>
    <style>
        * {
            box-sizing: border-box;
        }

        body, html {
            height: 100%;
        }

        body {
            background-color: #000000;
            color: #ffffff;
        }

        h1 {
            font-family: "Playfair Display";
            font-size: 30px;
            padding: 10px 0px;
            margin: 0px;
        }

        .field-box {
            border: 2px solid #d0d0d0;
            float: left;
        }

        .field {
            position: relative;
            width: 1024px;
            height: 640px;
        }

        .field .tile {
            position: absolute;
            width: 50px;
            height: 50px;
            background-size: 100%;
            background-image: url(images/tile-.png);
            z-index: 5;
        }

        .field .tileW {
            background-image: url(images/tile-W.png);
        }

        .field .tileE {
            background-image: url(images/tile-E.png);
            z-index: 10;
        }

        .field .tileP {
            background-image: url(images/tile-P.png);
            z-index: 10;
        }

        .field .tileHP {
            background-image: url(images/tile-HP.png);
            z-index: 9;
        }

        .field .tileSW {
            background-image: url(images/tile-SW.png);
            z-index: 9;
        }

        .field .tile .health {
            background-color: #ff0000;
            z-index: 11;
            position: absolute;
            left: 0px;
            top: 0px;
            height: 3px;
        }

        .field .tileP .health {
            background-color: #00ff00;
            z-index: 11;
            position: absolute;
            left: 0px;
            top: 0px;
            height: 3px;
        }

        .inventory-box {
            border: 2px solid #d0d0d0;
            float: left;
        }

        .inventory {
            position: relative;
            width: 800px;
            height: 32px;
        }

        .cl {
            clear: both;
            display: block;
        }
    </style>
</head>
<body>
<h1>Игровое поле</h1>
<div class="field-box">
    <div class="field"></div>
</div>
<div class="cl"></div>
<!--h1>Инвентарь</h1>
<div class="inventory-box"><div class="inventory"></div></div-->

<script>
    const gameZone = document.querySelector('.field')
    const locationMap = [
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
        [1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],


    ]

    let player = {
        x: 50,
        y: 50,
        character: document.createElement('div')
    }
    player.character.style.top = player.y + 'px'
    player.character.style.left = player.x + 'px'


    function Game() {
        this.init = function () {
        }

        this.play = function () {
            player.character.classList.add('tile')
            player.character.classList.add('tileP')
            gameZone.appendChild(player.character)
        }

        this.controller = function () {
            let yCount = 1
            let xCount = 1

            document.addEventListener('keydown', (e) => {
                switch (e.keyCode) {
                    case 87: //w
                       if (!locationMap[yCount -1][xCount]){
						   player.character.style.top = `${player.y -= 50}px`
						   yCount-=1
					   }

                        break
                    case  83://s
							if(!locationMap[yCount+1][xCount]){
                        		player.character.style.top = `${player.y += 50}px`
								yCount +=1
							}
                        break
                    case 65:///a
							if(!locationMap[yCount][xCount -1]){
								player.character.style.left = `${player.x -= 50}px`
								xCount-=1
							}

                        break
                    case 68://d
                       if (!locationMap[yCount][xCount+1]){
						   player.character.style.left = `${player.x += 50}px`
						   xCount += 1
					   }
                }

            })
        }

        this.render = function () {
            let x = 0
            let y = 0
            game.controller()
            for (let i = 0; i < locationMap.length; i++) {

                for (let b = 0; b < locationMap[i].length; b++) {

                    if (locationMap[i][b] === 0) {
                        const element = document.createElement('div')
                        element.classList.add('tile')
                        element.style.top = y + 'px'
                        element.style.left = x + 'px'
                        gameZone.appendChild(element)
                        x += 50
                    }
                    if (locationMap[i][b] === 1) {
                        const element = document.createElement('div')
                        element.classList.add('tile')
                        element.classList.add('tileW')
                        element.style.top = y + 'px'
                        element.style.left = x + 'px'
                        gameZone.appendChild(element)
                        x += 50
                    }
                }

                x = 0
                y += 50

            }


        }
    }

    var game = new Game();
    game.init();
    game.render()
    game.play()


</script>
</body>
</html>
